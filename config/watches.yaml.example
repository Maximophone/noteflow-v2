# NoteFlow v2 Watch Configuration
# 
# This file defines directories to watch for automatic job creation.
# Copy this file to watches.yaml and customize for your setup.
#
# Each watch monitors a directory for file changes and creates jobs
# when matching files are detected.
#
# Environment variables can be used: ${HOME}, ${NOTEFLOW_PATH}, etc.

watches:
  # -------------------------------------------------------------------------
  # Audio Input - Transcribes audio files
  # -------------------------------------------------------------------------
  # When audio files are added to this directory, they will be transcribed
  # using AssemblyAI (requires the transcribe processor plugin)
  - name: Audio Input
    path: ${HOME}/NoteFlow/Audio/Incoming
    patterns:
      - "*.mp3"
      - "*.m4a"
      - "*.wav"
      - "*.flac"
      - "*.aac"
      - "*.ogg"
    source_type: audio
    initial_processor: transcribe
    tags:
      - transcription
      - audio
    priority: 10
    debounce_seconds: 2.0
  
  # -------------------------------------------------------------------------
  # Video Input - Converts to audio then transcribes
  # -------------------------------------------------------------------------
  - name: Video Input
    path: ${HOME}/NoteFlow/Video/Incoming
    patterns:
      - "*.mp4"
      - "*.mkv"
      - "*.mov"
      - "*.avi"
      - "*.webm"
    source_type: video
    initial_processor: video_to_audio
    tags:
      - video
      - transcription
    priority: 5
  
  # -------------------------------------------------------------------------
  # Transcriptions - Process transcribed files
  # -------------------------------------------------------------------------
  # Watches the transcriptions folder for markdown files to classify
  # and route through the appropriate processing pipeline
  - name: Transcriptions
    path: ${HOME}/Obsidian/KnowledgeBot/Transcriptions
    patterns:
      - "*.md"
    source_type: markdown
    initial_processor: classify
    events:
      - created
      - modified
    tags:
      - transcript
    ignore_patterns:
      - "*.tmp"
      - ".DS_Store"
      - "*.swp"
  
  # -------------------------------------------------------------------------
  # Google Docs Folder - Sync Google Docs
  # -------------------------------------------------------------------------
  - name: Google Docs
    path: ${HOME}/Obsidian/gdoc
    patterns:
      - "*.md"
    source_type: gdoc
    initial_processor: gdoc_sync
    events:
      - created
      - modified
    tags:
      - gdoc
  
  # -------------------------------------------------------------------------
  # Notion Folder - Sync Notion pages
  # -------------------------------------------------------------------------
  - name: Notion
    path: ${HOME}/Obsidian/notion
    patterns:
      - "*.md"
    source_type: notion
    initial_processor: notion_sync
    events:
      - created
      - modified
    tags:
      - notion
  
  # -------------------------------------------------------------------------
  # MarkDownload - Process web page downloads
  # -------------------------------------------------------------------------
  # Processes pages saved with the MarkDownload browser extension
  - name: MarkDownload
    path: ${HOME}/Obsidian/MarkDownload
    patterns:
      - "markdownload_*.md"
    source_type: markdownload
    initial_processor: markdownload
    events:
      - created
    tags:
      - web
      - source

  # -------------------------------------------------------------------------
  # Example: Full Obsidian Vault Watch (Recursive)
  # -------------------------------------------------------------------------
  # Uncomment to watch an entire Obsidian vault for changes
  # Be careful with recursive watches on large vaults!
  #
  # - name: Obsidian Vault
  #   path: ${HOME}/Obsidian
  #   patterns:
  #     - "*.md"
  #   recursive: true
  #   source_type: obsidian
  #   events:
  #     - created
  #     - modified
  #   ignore_patterns:
  #     - ".obsidian/*"
  #     - ".trash/*"
  #     - "*.tmp"
  #     - ".git/*"
  #   tags:
  #     - obsidian

